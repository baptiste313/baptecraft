/*!
 * https://github.com/leonardosnt/mc-player-counter
 *
 * Copyright (C) 2017 leonardosnt
 * Licensed under the MIT License. See LICENSE file in the project root for full license information.
 */
!function(){"use strict";var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=function(){function t(e){var n=e.ip,r=e.element,i=e.format,o=e.refreshRate;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=i||"{online}",o=o||6e4,!n)throw TypeError("ip cannot be null or undefined");if(!r)throw TypeError("element cannot be null or undefined");var a=n.split(":");this.ip=a[0],this.port=a[1]||"25565",this.format=i,this.element="string"==typeof r?document.querySelector(r):r,this.runQuery(),this.timerId=setInterval(this.runQuery.bind(this),o)}return e(t,[{key:"runQuery",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var n=JSON.parse(t.responseText);if(null!==e.element.getAttribute("data-playercounter-status"))return void(e.element.innerText=n.online?"en ligne":"hors ligne");n.online&&(e.element.innerHTML=e.format.replace(/{\b(online|max)\b}/gi,function(e,t){return n.players["online"===t?"now":t]}))}},t.open("GET","https://mcapi.us/server/status?ip="+this.ip+"&port="+this.port),t.send()}}]),t}(),n=function(){for(var e=document.querySelectorAll("[data-playercounter-ip]"),n=0;n<e.length;n++){var r=e[n];new t({element:r,ip:r.getAttribute("data-playercounter-ip"),format:r.getAttribute("data-playercounter-format"),refreshRate:r.getAttribute("data-playercounter-refreshRate")})}};"complete"===document.readyState?n():window.onload=n,window.PlayerCounter=t}();